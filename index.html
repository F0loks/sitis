<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prize Wheel Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        .wheel {
            width: 300px;
            height: 300px;
            position: relative;
            transition: transform 4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .segment {
            position: absolute;
            width: 100%;
            height: 100%;
            clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 50% 50%);
            transform-origin: 50% 50%;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding-top: 20px;
            font-size: 14px;
            font-weight: bold;
            color: white;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        .pointer {
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid #b91c1c;
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }
        @media (max-width: 640px) {
            .wheel {
                width: 250px;
                height: 250px;
            }
            .segment {
                font-size: 12px;
                padding-top: 15px;
            }
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="bg-white p-6 rounded-lg shadow-xl max-w-md w-full text-center">
        <h1 class="text-3xl font-bold text-gray-800 mb-4">Prize Wheel</h1>
        <div class="relative mx-auto">
            <div id="wheel" class="wheel mx-auto">
                <!-- Wheel segments will be generated by JavaScript -->
            </div>
            <div class="pointer"></div>
        </div>
        <button id="spinButton" class="mt-6 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-lg shadow-md hover:from-blue-600 hover:to-purple-700 transition duration-300">
            Spin
        </button>
        <div id="result" class="mt-4 text-lg font-semibold text-gray-800"></div>
    </div>

    <script>
        // Prize wheel configuration
        const prizes = [
            "100 Points",
            "Gift Card",
            "Free Spin",
            "Bonus",
            "Discount",
            "Mystery Prize",
            "Try Again",
            "Jackpot"
        ];
        const colors = [
            "#ef4444",
            "#f97316",
            "#eab308",
            "#22c55e",
            "#3b82f6",
            "#8b5cf6",
            "#ec4899",
            "#10b981"
        ];
        const segments = 8;
        const anglePerSegment = 360 / segments;

        // Create wheel segments
        const wheel = document.getElementById("wheel");
        prizes.forEach((prize, index) => {
            const segment = document.createElement("div");
            segment.className = "segment";
            segment.style.background = `linear-gradient(${colors[index]}, ${colors[index]}cc)`;
            segment.style.transform = `rotate(${index * anglePerSegment}deg)`;
            segment.innerText = prize;
            wheel.appendChild(segment);
        });

        // Spin button and logic
        const spinButton = document.getElementById("spinButton");
        const resultDisplay = document.getElementById("result");
        let isSpinning = false;

        spinButton.addEventListener("click", () => {
            if (isSpinning) return;
            isSpinning = true;
            spinButton.disabled = true;
            resultDisplay.innerText = "";

            // Generate random spin angle (3-5 full rotations + random segment)
            const randomRotations = 3 + Math.random() * 2;
            const randomSegment = Math.floor(Math.random() * segments);
            const totalAngle = randomRotations * 360 + randomSegment * anglePerSegment;

            // Apply rotation
            wheel.style.transform = `rotate(${totalAngle}deg)`;

            // Calculate winning prize after animation
            setTimeout(() => {
                // Calculate the final angle (normalized to 0-360)
                const finalAngle = totalAngle % 360;
                // Determine winning segment (inverted due to rotation direction)
                const winningIndex = Math.floor(((360 - finalAngle) % 360) / anglePerSegment) % segments;
                const winningPrize = prizes[winningIndex];

                // Display result in an alert
                alert(`You won: ${winningPrize}!`);

                // Trigger confetti animation if not "Try Again"
                if (winningPrize !== "Try Again") {
                    confetti({
                        particleCount: 100,
                        spread: 70,
                        origin: { y: 0.6 }
                    });
                }

                // Reset wheel
                isSpinning = false;
                spinButton.disabled = false;
                resultDisplay.innerText = `You won: ${winningPrize}!`;
            }, 4000); // Match animation duration
        });
    </script>
</body>
</html>
